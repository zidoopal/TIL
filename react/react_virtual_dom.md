# DOM (Document Object Model)

- 웹페이지의 HTML 요소(엘리먼트)들을 Tree 형태의 구조로 표현 한 것
- DOM tree 안에는 각각의 엘리먼트에 상응하는 노드가 들어있다.
- 개발자들은 DOM이 제공하는 `getElemetById()`, `querySelector()` 같은 API를 통해서 DOM 구조 안에 있는 엘리먼트를 원하는대로 구조/내용/스타일 등을 변경 시킬 수 있다. (이를 DOM 조작 이라고 한다)

# **가상 DOM (Virtual DOM)**

- **실제 DOM과 같은 구조를 가지고 있는 ‘복사본’**
- 실제 DOM이 아닌, 자바스크립트 객체 형태. 자바스크립트 메모리 안에 저장되어있다.
- **실제 DOM의 모든 엘리먼트, 속성들을 똑같이 갖고 있긴 하나, 브라우저에 있는 문서에 직접 접근 할 순 없다.**<br>
  👉 **SO, 화면에 보여지는 내용을 직접 수정할 수 없음**<br>

🤔 아니 그럼 수정도 직접 못하는거 왜 굳이 복사 해 가지고 뭐 할라고 쓰는 겨..?<br>

💡 **🤩 바로 리액트가 이 가상 DOM을 똑똑하게 잘 사용해서, 실제 DOM 조작 시간을 획기적으로 줄여줌!**<br>

# **DOM 조작**

웹 페이지에 있어서 DOM 조작은 없어서는 안 되는 과정 중 하나이다. <br>

게시물 추가/ 댓글 추가 / 좋아요를 누르는 등 화면에 보여지는 내용을 바꾸기 위해서는 DOM 조작은 필수이기 때문.<br>

## **실제 DOM 조작 과정**

- 브라우저가 현재 페이지의 HTML을 탐색 한다.
- 해당 엘리먼트를 찾고, 해당 엘리먼트+자녀 엘리먼트를 DOM 에서 제거한다
- 새롭게 수정 된 엘리먼트들로 교체한다.
- CSS와 레이아웃 정보를 개선한다.
- 새롭게 바뀐 내용에 따라서 브라우저에 다시 그려준다.

DOM은 Tree구조로 되어 있어서, tree의 정보를 업데이트 하는 것은 그렇게 무거운 작업은 아니나, <br>

**매번 DOM을 조작 할 때 마다, 브라우저 화면에 UI를 새롭게 그려주는 작업은 꽤 복잡하고 시간이 걸리는 작업이다.**<br>

(그려 줄 항목이 많을 수록 더더욱 비효율적)<br>

### **React는 가상 DOM을 활용하여, 이러한 DOM 조작을 훨씬 효율적이고 빠르게 만들어준다.**

가상 DOM은 실제 DOM과 엘리먼트, 속성들은 똑같이 갖고 있으나 **실제 화면에 접근 ❌**, <br>

**실제 화면에 보이는 UI 를 조작 할 수 있게 해주는 API들을 제공하지는 않는다.** <br>

그저 메모리에 저장되어있는 자바스크립트 객체에 불과함. <br>

👉 **이 특징 덕분에 가상 DOM 생성과 접근은 매우 가볍고 빠름** <br>

### **React는 항상 2개의 가상 DOM 객체를 갖고 있다.**

1️⃣ 렌더링 이전 화면 구조를 나타내는 가상 DOM<br>

2️⃣ 렌더링 이후에 보이게 될 화면 구조를 나타내는 가상 DOM<br>

### **리액트는 state가 변경 될 때 마다, 화면이 새로 렌더링이 된다.**

- 리액트는 렌더링이 발생 될 상황에 놓일 때 마다, 실제 브라우저에 그려지기 전, <br>
  새로운 화면에 들어갈 내용이 담긴 가상 DOM을 생성한다.
- 그 후, 렌더링 이 전의 첫 번째 가상 DOM과 업데이트 이후의 내용을 담고 있는 <br>
  두 번째 가상 DOM을 비교해서 정확히 어떤 엘리먼트 들이 변했는지 찾아낸다. <br>
  👉 이런 과정을 `diffing` 이라고 한다.
- 이런 과정을 통해, 실제로 바뀐 부분들만 실제 DOM에 적용 시켜준다. <br>
  👉 이 과정은 `Reconciliation(재조정)` 이라고 한다.<br>

💡 React의 `Reconciliation(재조정)` 과정이 효율적인 이유는, `Batch Update` 덕분이다.<br>

`Batch Update` : 변경된 모든 엘리먼트들을 집단으로 실제 DOM에 한 번에 적용 시켜 주는 것,<br>
변경된 엘리먼트를 하나하나 따로따로 반복하여 브라우저에 그려 주는 것이 아니라 <br>
변경 된 내용을 한 번에 다 받아와서 브라우저에 한 번에 그려줌으로써 빠르고 효율적임<br>

<br>

### 📚 참고

---

[동영상]

- [[Youtube - 별코딩 : \***\*React의 가상돔 (Virtual DOM)이 뭔가요? (짱 쉬움)]\*\***](https://www.youtube.com/watch?v=gc-kXt0tjTM)
